{"version":3,"sources":["./src/app/pages/events/edit-event/edit-event.component.css","./src/app/pages/events/edit-event/edit-event.component.html","./src/app/pages/events/edit-event/edit-event.component.ts","./src/app/pages/events/edit-event/edit-event.module.ts"],"names":[],"mappings":"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","file":"edit-event.module.chunk.js","sourcesContent":["module.exports = \"::ng-deep .list-container {\\r\\n  min-height: 440px;\\r\\n  height: auto;\\r\\n  top: 0;\\r\\n  bottom: 0;\\r\\n}\\r\\n::ng-deep .product {\\r\\n  height: 65px;\\r\\n}\\r\\n::ng-deep .product > img {\\r\\n  height: 100%;\\r\\n  width: 95px;\\r\\n  float: left;\\r\\n}\\r\\n::ng-deep .product > div {\\r\\n  padding-left: 10px;\\r\\n  vertical-align: top;\\r\\n  line-height: 65px;\\r\\n  font-size: 15px;\\r\\n  float: left;\\r\\n}\\r\\n::ng-deep .product > div.price {\\r\\n  float: right;\\r\\n  font-size: 18px;\\r\\n}\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/pages/events/edit-event/edit-event.component.css\n// module id = ./src/app/pages/events/edit-event/edit-event.component.css\n// module chunks = edit-event.module","module.exports = \"<div class=\\\"main-content\\\">\\r\\n  <div class=\\\"container-fluid\\\">\\r\\n    <div class=\\\"row\\\">\\r\\n      <div class=\\\"col-md-12\\\">\\r\\n        <div *ngIf=\\\"event\\\" id=\\\"form-container\\\">\\r\\n          <form #form (submit)=\\\"onFormSubmit($event)\\\">\\r\\n            <dx-form id=\\\"form\\\"\\r\\n                     [showColonAfterLabel]=\\\"true\\\"\\r\\n                     [showValidationSummary]=\\\"true\\\"\\r\\n                     [formData]=\\\"event\\\"\\r\\n                     validationGroup=\\\"eventData\\\">\\r\\n\\r\\n              <div *dxTemplate=\\\"let data of 'item'\\\">\\r\\n                {{data.firstName}} {{data.lastName}}\\r\\n              </div>\\r\\n\\r\\n              <dxi-item itemType=\\\"tabbed\\\" [tabPanelOptions]=\\\"{ deferRendering: false, swipeEnabled: false }\\\">\\r\\n                <!-- General Information -->\\r\\n                <dxi-tab title=\\\"General Information\\\">\\r\\n                  <dxi-item dataField=\\\"patientId\\\" editorType=\\\"dxSelectBox\\\"\\r\\n                            [editorOptions]=\\\"{ dataSource: patients, displayExpr: 'firstName', valueExpr: '_id', searchEnabled: true, itemTemplate: 'item' }\\\"\\r\\n                            [label]=\\\"{text: 'Patient'}\\\">\\r\\n                    <dxi-validation-rule\\r\\n                      type=\\\"required\\\"\\r\\n                      message=\\\"Patient is required\\\">\\r\\n                    </dxi-validation-rule>\\r\\n                  </dxi-item>\\r\\n                  <dxi-item dataField=\\\"cause\\\" editorType=\\\"dxTextArea\\\" [editorOptions]=\\\"{ height: 140 }\\\">\\r\\n                    <dxi-validation-rule\\r\\n                      type=\\\"required\\\"\\r\\n                      message=\\\"Cause is required\\\">\\r\\n                    </dxi-validation-rule>\\r\\n                  </dxi-item>\\r\\n                  <dxi-item dataField=\\\"resolution\\\" editorType=\\\"dxTextArea\\\"\\r\\n                            [editorOptions]=\\\"{ height: 140 }\\\"></dxi-item>\\r\\n                </dxi-tab>\\r\\n\\r\\n                <!-- Attachments -->\\r\\n                <dxi-tab title=\\\"Attachments\\\">\\r\\n                  <dx-file-uploader\\r\\n                    #fileUploader\\r\\n                    [(uploadUrl)]=\\\"url\\\"\\r\\n                    [multiple]=\\\"true\\\"\\r\\n                    accept=\\\"image/*\\\"\\r\\n                    name=\\\"attachments\\\"\\r\\n                    uploadMode=\\\"instantly\\\"\\r\\n                    (onUploaded)=\\\"refresh()\\\"\\r\\n                  ></dx-file-uploader>\\r\\n\\r\\n                  <div *ngIf=\\\"attachments\\\" class=\\\"list-container\\\">\\r\\n                    <dx-list [items]=\\\"attachments\\\" height=\\\"100%\\\" [allowItemDeleting]=\\\"true\\\" itemDeleteMode=\\\"static\\\" (onItemDeleted)=\\\"deleteImage($event)\\\">\\r\\n                      <div *dxTemplate=\\\"let item of 'item'\\\">\\r\\n                        <div class=\\\"product\\\">\\r\\n                          <img src=\\\"{{ mainUrl }}/events/attachments/{{ item._id }}/download\\\"/>\\r\\n                          <div class=\\\"name\\\">{{ item.name }}</div>\\r\\n                          <div class=\\\"price\\\">\\r\\n                            <a download=\\\"custom-filename.jpg\\\" href=\\\"{{ mainUrl }}/events/attachments/{{ item._id }}/download\\\" title=\\\"Download\\\">\\r\\n                              <i class=\\\"fas fa-download\\\"></i> Download\\r\\n                            </a>\\r\\n                          </div>\\r\\n                        </div>\\r\\n                      </div>\\r\\n                    </dx-list>\\r\\n                  </div>\\r\\n\\r\\n                </dxi-tab>\\r\\n\\r\\n                <!-- Background Questions -->\\r\\n                <dxi-tab title=\\\"Background Questions\\\">\\r\\n                  <div>\\r\\n                    <div class=\\\"list-container\\\">\\r\\n                      <dx-list [dataSource]=\\\"event.backgroundQuestions\\\" height=\\\"100%\\\"\\r\\n                               [searchExpr]=\\\"'question'\\\"\\r\\n                               searchMode=\\\"contains\\\"\\r\\n                               [searchEnabled]=\\\"true\\\">\\r\\n                        <div *dxTemplate=\\\"let q of 'item'; let i = index\\\">\\r\\n                          <h5>{{ q.question }}</h5>\\r\\n                          <!--Question Type YES_NO-->\\r\\n                          <div *ngIf=\\\"q.type == 'YES_NO'\\\">\\r\\n                            <dx-select-box [items]=\\\"['YES', 'NO']\\\" [(ngModel)]=\\\"q.answer\\\"\\r\\n                                           [ngModelOptions]=\\\"{ standalone: true }\\\"\\r\\n                                           name=\\\"yesNoAnswer\\\">\\r\\n                            </dx-select-box>\\r\\n                            <div *ngIf=\\\"q.answer == 'YES'\\\">\\r\\n                              <span>Comentario</span>\\r\\n                              <dx-text-area name=\\\"commentAnswer\\\">\\r\\n                              </dx-text-area>\\r\\n                            </div>\\r\\n                          </div>\\r\\n                          <!--Question Type YES_NO-->\\r\\n                          <div *ngIf=\\\"q.type == 'DATE'\\\">\\r\\n                            <dx-date-box [(ngModel)]=\\\"q.answer\\\"\\r\\n                                         [ngModelOptions]=\\\"{ standalone: true }\\\" type=\\\"date\\\"\\r\\n                                         name=\\\"dateAnswer\\\">\\r\\n                            </dx-date-box>\\r\\n                          </div>\\r\\n                          <!--Question Type NUMBER-->\\r\\n                          <div *ngIf=\\\"q.type == 'NUMBER'\\\">\\r\\n                            <dx-number-box\\r\\n                              name=\\\"numberAnswer\\\"\\r\\n                              [(ngModel)]=\\\"q.answer\\\"\\r\\n                              [ngModelOptions]=\\\"{ standalone: true }\\\"\\r\\n                              [showSpinButtons]=\\\"true\\\"\\r\\n                              [showClearButton]=\\\"true\\\"\\r\\n                            ></dx-number-box>\\r\\n                          </div>\\r\\n                          <!--Question Type OPEN-->\\r\\n                          <div *ngIf=\\\"q.type == 'OPEN'\\\">\\r\\n                            <dx-text-area\\r\\n                              name=\\\"openAnswer\\\"\\r\\n                              [(ngModel)]=\\\"q.answer\\\"\\r\\n                              [ngModelOptions]=\\\"{ standalone: true }\\\"\\r\\n                              [height]=\\\"90\\\">\\r\\n                            </dx-text-area>\\r\\n                          </div>\\r\\n                        </div>\\r\\n                      </dx-list>\\r\\n                    </div>\\r\\n                  </div>\\r\\n                </dxi-tab>\\r\\n              </dxi-item>\\r\\n\\r\\n            </dx-form>\\r\\n            <br/>\\r\\n            <dx-button\\r\\n              text=\\\"Save\\\"\\r\\n              icon=\\\"fas fa-save\\\"\\r\\n              type=\\\"success\\\"\\r\\n              validationGroup=\\\"eventData\\\"\\r\\n              [useSubmitBehavior]=\\\"true\\\">\\r\\n            </dx-button>\\r\\n\\r\\n            <dx-button\\r\\n              text=\\\"Back\\\"\\r\\n              type=\\\"normal\\\"\\r\\n              icon=\\\"fas fa-arrow-left\\\"\\r\\n              routerLink=\\\"/events\\\"\\r\\n              [useSubmitBehavior]=\\\"false\\\">\\r\\n            </dx-button>\\r\\n          </form>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/pages/events/edit-event/edit-event.component.html\n// module id = ./src/app/pages/events/edit-event/edit-event.component.html\n// module chunks = edit-event.module","import { Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { CrudService } from '../../../services/crud.service';\nimport { Event } from '../../../models/event';\nimport { environment } from 'environments/environment';\nimport notify from 'devextreme/ui/notify';\nimport { DxFileUploaderComponent, DxMultiViewComponent } from 'devextreme-angular';\nimport { Patient } from '../../../models/patient';\nimport CustomStore from 'devextreme/data/custom_store';\n\n@Component({\n  selector: 'app-edit-event',\n  templateUrl: './edit-event.component.html',\n  styleUrls: [ './edit-event.component.css' ]\n})\nexport class EditEventComponent implements OnInit, OnDestroy {\n  event: Event;\n  private sub: any;\n  mainUrl: string = environment.restApi;\n  url: string = environment.restApi;\n  attachments: any[];\n  patients: any[];\n\n  @ViewChild('fileUploader') fileUploader: DxFileUploaderComponent;\n  @ViewChild('multiview') multiview: DxMultiViewComponent;\n\n  constructor(private crud: CrudService, private route: ActivatedRoute) {\n    this.event = new Event();\n    const itemsPerPage = environment.itemsPerPage;\n\n    // Get patient's list from the Doctor\n    this.crud.listEntity('patients?skip=0&take=10')\n      .then(res => this.patients = res.docs);\n  }\n\n  deleteImage(event): void {\n    this.crud.deleteEntity(`events/${this.event._id}/attachment/${event.itemData._id}/delete`);\n  }\n\n  ngOnInit() {\n    this.sub = this.route.params.subscribe(params => {\n      this.crud.getEntityById('events', params[ 'id' ])\n        .then(res => {\n          this.event = res;\n          this.refresh();\n        });\n\n      // Set attachments post method for uploading files\n      this.url = `${this.url}/events/attachments/${params[ 'id' ]}`;\n    });\n  }\n\n  ngOnDestroy() {\n    this.sub.unsubscribe();\n  }\n\n  refresh() {\n    // Get attachments related to event\n    this.crud.listEntity(`events/${this.event._id}/attachments`)\n      .then(res => this.attachments = res);\n  }\n\n  onFormSubmit(e) {\n    // Create a patient event\n    this.crud.updateEntity(`events/${this.event._id}/update`, this.event)\n      .then((res) => {\n        notify('Event was updated satisfactory.', 'success', 1000);\n      });\n\n    e.preventDefault();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/pages/events/edit-event/edit-event.component.ts","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\nimport {\n  DxFormModule,\n  DxTextAreaModule,\n  DxCheckBoxModule,\n  DxSelectBoxModule,\n  DxButtonModule,\n  DxTemplateModule,\n  DxFileUploaderModule,\n  DxListModule,\n  DxMultiViewModule, DxDateBoxModule, DxNumberBoxModule, DxDropDownBoxModule\n} from 'devextreme-angular';\nimport { EditEventComponent } from './edit-event.component';\n\nconst routes: Routes = [{\n  path: '',\n  component: EditEventComponent\n}];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    DxFormModule,\n    DxListModule,\n    DxTextAreaModule,\n    DxCheckBoxModule,\n    DxSelectBoxModule,\n    DxButtonModule,\n    FormsModule,\n    DxTemplateModule,\n    DxFileUploaderModule,\n    DxMultiViewModule,\n    DxDateBoxModule,\n    DxNumberBoxModule,\n    DxTextAreaModule,\n    DxListModule,\n    DxDropDownBoxModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [ EditEventComponent ]\n})\nexport class EditEventModule {\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/pages/events/edit-event/edit-event.module.ts"],"sourceRoot":"webpack:///"}